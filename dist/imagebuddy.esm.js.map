{"version":3,"file":"imagebuddy.esm.js","sources":["webpack:///webpack/bootstrap","webpack:///./source/ImageBuddy.js","webpack:///./source/ImageBuddyDOMElement.js","webpack:///./source/ImageBuddyDebug.js","webpack:///./source/ImageBuddyEvents.js","webpack:///./source/ImageBuddyUtil.js"],"sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = \"./source/ImageBuddy.js\");\n","function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport ImageBuddyUtil from './ImageBuddyUtil';\nimport ImageBuddyDebug from './ImageBuddyDebug';\nimport ImageBuddyDOMElement from './ImageBuddyDOMElement';\nimport ImageBuddyEvents from './ImageBuddyEvents';\n/**\n * ImageSelector class\n */\n\nvar ImageBuddy =\n/*#__PURE__*/\nfunction () {\n  /**\n   * Constructor\n   *\n   * @param {object} opts\n   */\n  function ImageBuddy(opts) {\n    var _this = this;\n\n    _classCallCheck(this, ImageBuddy);\n\n    _defineProperty(this, \"resizeHandler\", function () {\n      // cycle through loaded images and see if we need to select a different source\n      for (var i = 0; i < _this.elements.loaded.length; i++) {\n        var item = _this.elements.loaded[i];\n        var dimensions = item.getContainerDimensions();\n\n        if (dimensions.width > item.currentSize.width || !item.noHeight && dimensions.height > item.currentSize.height) {\n          _this.debugger.debug('swapping image');\n\n          item.chooseImage();\n        }\n      } // re-calculate top offsets for images in the queue\n\n\n      for (var _i = 0; _i < _this.elements.queue.length; _i++) {\n        _this.elements.queue[_i].calculateElementTopOffset();\n      } // load any unprocessed cache elements\n\n\n      _this.processElementQueue();\n    });\n\n    _defineProperty(this, \"scrollHandler\", function () {\n      // lazy load images\n      _this.processElementQueue();\n    });\n\n    this.eventsRunning = {};\n    this.elementCache = [];\n    this.elements = {\n      queue: [],\n      loaded: []\n    };\n    this.events = [];\n    this.currentCacheId = 0;\n    this.config = {\n      events: {\n        resize: 'ImageBuddyResize',\n        scroll: 'ImageBuddyScroll'\n      },\n      attributes: {\n        // enabled: 'data-ib-enabled',\n        sources: 'data-ib-sources',\n        lazyLoad: 'data-ib-lazyload',\n        lazyLoadThreshold: 'data-ib-lazyload-threshold',\n        matchDPR: 'data-ib-match-dpr',\n        noHeight: 'data-ib-no-height'\n      },\n      classes: {\n        base: 'ib__image',\n        loading: 'ib__image--loading',\n        loaded: 'ib__image--loaded'\n      }\n    }; // create default options and merge any overrides\n\n    this.opts = Object.assign({\n      debug: false,\n      matchDPR: true,\n      lazyLoad: true,\n      lazyLoadThreshold: 100\n    }, opts);\n    this.debugger = new ImageBuddyDebug(this.opts.debug); // this.resizeHandler = this.resizeHandler.bind(this);\n    // this.scrollHandler = this.scrollHandler.bind(this);\n\n    this.setupEventListeners();\n    this.update();\n  }\n\n  _createClass(ImageBuddy, [{\n    key: \"processElementQueue\",\n    value: function processElementQueue() {\n      var numProcessed = 0;\n\n      if (!this.elements.queue.length) {\n        return numProcessed;\n      }\n\n      for (var i = 0; i < this.elements.queue.length; i++) {\n        var item = this.elements.queue[i];\n\n        if (item.options.lazyLoad && item.canLazyLoad(item) === false) {\n          continue;\n        }\n\n        item.chooseImage(); // move to loaded array\n\n        this.elements.queue.splice(i, 1);\n        this.elements.loaded.push(item);\n        i--;\n        numProcessed++;\n      }\n\n      return numProcessed;\n    }\n  }, {\n    key: \"update\",\n    value: function update() {\n      var opts = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n      var t1 = performance.now();\n      var parentEl = opts.parentEl || document;\n      var newElements = this.getElements(parentEl);\n      var updateOffsetTop = opts.updateOffsetTop || false;\n      this.elements.queue = this.elements.queue.concat(newElements);\n      this.debugger.debugInfo(this.elements.queue);\n\n      if (updateOffsetTop) {\n        for (var i = 0; i < this.elements.queue.length; i++) {\n          this.elements.queue[i].calculateElementTopOffset();\n        }\n      }\n\n      var numProcessed = this.processElementQueue();\n      var t2 = performance.now();\n      this.debugger.debug('ImageBuddy: update complete', \"\".concat(numProcessed, \" elements\"), \"\".concat(Math.round(t2 - t1), \"ms\"));\n      ImageBuddyEvents.emit('update');\n    }\n    /**\n     * Setup and throttle event listeners -- scroll & resize\n     */\n\n  }, {\n    key: \"setupEventListeners\",\n    value: function setupEventListeners() {\n      ImageBuddyUtil.throttleEventListener('resize', this.resizeHandler, {\n        passive: true\n      });\n      ImageBuddyUtil.throttleEventListener('scroll', this.scrollHandler, {\n        passive: true\n      });\n    }\n    /**\n     * Get all the HTML elements configured for image selection\n     */\n\n  }, {\n    key: \"getElements\",\n    value: function getElements(parentEl) {\n      var elements = [];\n      var foundEls = parentEl.querySelectorAll(\"[\".concat(this.config.attributes.sources, \"]\"));\n\n      for (var i = 0; i < foundEls.length; i++) {\n        var el = foundEls[i]; // const offsetTop = el.getBoundingClientRect().top + (window.pageYOffset || document.documentElement.scrollTop);\n        // attribute that can be used to ignore specific images when loading\n\n        if (ImageBuddyDOMElement.isCached(el) || ImageBuddyDOMElement.shouldIgnore(el)) {\n          continue;\n        }\n\n        elements.push(new ImageBuddyDOMElement(el, this.config, this.opts));\n      }\n\n      return elements;\n    }\n    /**\n     * Resize handler\n     */\n\n  }], [{\n    key: \"on\",\n    value: function on(event, listener) {\n      ImageBuddyEvents.on(event, listener);\n    }\n  }]);\n\n  return ImageBuddy;\n}();\n\nexport default ImageBuddy;","function _slicedToArray(arr, i) { return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _nonIterableRest(); }\n\nfunction _nonIterableRest() { throw new TypeError(\"Invalid attempt to destructure non-iterable instance\"); }\n\nfunction _iterableToArrayLimit(arr, i) { var _arr = []; var _n = true; var _d = false; var _e = undefined; try { for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i[\"return\"] != null) _i[\"return\"](); } finally { if (_d) throw _e; } } return _arr; }\n\nfunction _arrayWithHoles(arr) { if (Array.isArray(arr)) return arr; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nimport ImageBuddyUtil from './ImageBuddyUtil';\nimport ImageBuddyEvents from './ImageBuddyEvents';\n\nvar _default =\n/*#__PURE__*/\nfunction () {\n  function _default(el, itConfig, itOpts) {\n    _classCallCheck(this, _default);\n\n    el.classList.add(itConfig.classes.base);\n    el.setAttribute('data-ib-cache-id', ImageBuddyUtil.getUniqueId());\n    this.el = el;\n    this.config = itConfig;\n    this.elType = el.tagName.toLowerCase();\n    this.cacheId = el.getAttribute('data-ib-cache-id'); // this.offsetTop = this.calculateElementTopOffset(el);\n\n    this.sizes = this.getSizes(el.getAttribute(itConfig.attributes.sources));\n    this.currentSize = false;\n    this.loaded = false; // FIXME: figure out a way to check if images are already loaded when this array is created\n\n    this.isLoading = false;\n    this.options = {\n      lazyLoad: el.getAttribute(itConfig.attributes.lazyLoad) ? ImageBuddyUtil.parseBooleanString(el.getAttribute(itConfig.attributes.lazyLoad)) : itOpts.lazyLoad,\n      lazyLoadThreshold: el.getAttribute(itConfig.attributes.lazyLoadThreshold) ? el.getAttribute(itConfig.attributes.lazyLoadThreshold) : itOpts.lazyLoadThreshold,\n      matchDPR: el.getAttribute(itConfig.attributes.matchDPR) ? ImageBuddyUtil.parseBooleanString(el.getAttribute(itConfig.attributes.matchDPR)) : itOpts.matchDPR,\n      noHeight: el.getAttribute(itConfig.attributes.noHeight) ? el.getAttribute(itConfig.attributes.noHeight) : false\n    };\n    this.calculateElementTopOffset();\n  }\n\n  _createClass(_default, [{\n    key: \"calculateElementTopOffset\",\n    value: function calculateElementTopOffset() {\n      this.offsetTop = this.el.getBoundingClientRect().top + (window.pageYOffset || document.documentElement.scrollTop);\n    }\n    /**\n     * Create an array of image sizes from the \"data-ib-sources\" attribute\n     *\n     * @param {string} rImgSources\n     */\n\n  }, {\n    key: \"getSizes\",\n    value: function getSizes(rImgSources) {\n      return rImgSources.split(',').map(function (sizeEl) {\n        var _sizeEl$trim$split = sizeEl.trim().split(' '),\n            _sizeEl$trim$split2 = _slicedToArray(_sizeEl$trim$split, 3),\n            url = _sizeEl$trim$split2[0],\n            width = _sizeEl$trim$split2[1],\n            height = _sizeEl$trim$split2[2];\n\n        return {\n          url: url,\n          width: parseInt(width),\n          height: parseInt(height)\n        };\n      }).sort(function (a, b) {\n        if (a.width >= a.height) {\n          return a.width > b.width ? 1 : -1;\n        } else {\n          return a.height > b.height ? 1 : -1;\n        }\n      });\n    }\n    /**\n     * Test if an item is lazy load-able\n     *\n     * @param {object} item\n     */\n\n  }, {\n    key: \"canLazyLoad\",\n    value: function canLazyLoad() {\n      if (!this.options.lazyLoad || this.loaded) {\n        return false;\n      }\n\n      if (this.offsetTop - (window.pageYOffset + window.innerHeight) <= this.options.lazyLoadThreshold) {\n        return true;\n      }\n\n      return false;\n    }\n  }, {\n    key: \"chooseImage\",\n\n    /**\n     * Choose the appropriate image and apply it to the element\n     *\n     * @param {object} item\n     */\n    value: function chooseImage() {\n      var _this = this;\n\n      if (this.isLoading) {\n        return;\n      }\n\n      this.isLoading = true;\n      var sizes = this.getSizes(this.el.getAttribute(this.config.attributes.sources));\n      var elType = this.el.tagName.toLowerCase();\n\n      if (elType === 'img' && parseInt(getComputedStyle(this.el).width) <= 1) {\n        this.el.style.width = '100%';\n      }\n\n      var container = this.getContainerDimensions();\n\n      if (this.options.matchDPR) {\n        container.width *= window.devicePixelRatio;\n        container.height *= window.devicePixelRatio;\n      }\n\n      var scoredSizes = sizes.map(function (size) {\n        size.score = _this.calculateUsabilityScore(container.width, container.height, size.width, size.height);\n        return size;\n      });\n      scoredSizes.sort(function (a, b) {\n        return a.score - b.score;\n      }); // ImageBuddyUtil.debugTable(scoredSizes);\n\n      var idealImage = scoredSizes[scoredSizes.length - 1]; // ImageBuddyUtil.debug(idealImage);\n\n      this.loadImage(idealImage.url, function () {\n        _this.loaded = true;\n        _this.isLoading = false;\n        _this.currentSize = {\n          width: idealImage.width,\n          height: idealImage.height\n        };\n\n        _this.el.classList.remove(_this.config.classes.loading);\n\n        _this.el.classList.add(_this.config.classes.loaded);\n\n        ImageBuddyEvents.emit('image-loaded', _this.el);\n      });\n    }\n  }, {\n    key: \"calculateUsabilityScore\",\n    value: function calculateUsabilityScore(containerWidth, containerHeight, imageWidth, imageHeight) {\n      // ImageBuddyUtil.debug(`container: ${containerWidth}x${containerHeight}`, `image: ${imageWidth}x${imageHeight}`);\n      var score = 1;\n\n      if (imageWidth >= containerWidth) {\n        score *= containerWidth / imageWidth;\n      } else {\n        score -= Math.abs(containerWidth - imageWidth);\n      }\n\n      if (containerHeight) {\n        if (imageHeight >= containerHeight) {\n          score *= containerHeight / imageHeight;\n        } else {\n          score -= Math.abs(containerHeight - imageHeight);\n        }\n      }\n\n      return score;\n    }\n    /**\n     * Get container dimensions of an HTML element\n     *\n     * @param {object} el\n     * @param {bool} noHeight\n     */\n\n  }, {\n    key: \"getContainerDimensions\",\n    value: function getContainerDimensions() {\n      // FIXME:\n      // this is tricky since an IMG tag may not have a set height and we can't rely on\n      // its container for that height value\n      // I'm thinking the best way to tackle this is to see if the element has a height\n      // specified -- if not we'll disregard the height value\n      //      - how does a 100% height work with this?\n      // el.clientHeight works fine on all tags except IMG\n      var displayStyle = this.el.style.display ? this.el.style.display : window.getComputedStyle(this.el).display;\n      var container = {\n        width: displayStyle === 'block' ? this.el.clientWidth : 0,\n        height: this.el.clientHeight ? this.el.clientHeight : 0 // TODO: try `parseInt(window.getComputedStyle(el).height)` here\n\n      };\n\n      if (!container.width) {\n        container.width = this.getElementWidth(this.el.parentElement);\n      }\n\n      if (this.options.noHeight) {\n        container.height = 0;\n      }\n\n      return container;\n    }\n    /**\n     * Return the width of a tested element\n     * This will examine a style attribute tag first and fallback to the computed style\n     *\n     * @param {object} el\n     */\n\n  }, {\n    key: \"getElementWidth\",\n    value: function getElementWidth(el) {\n      var displayStyle = el.style.display ? el.style.display : window.getComputedStyle(el).display;\n\n      if (displayStyle !== 'block' && el.parentElement) {\n        return this.getElementWidth(el.parentElement);\n      }\n\n      return el.clientWidth;\n    }\n  }, {\n    key: \"loadImage\",\n    value: function loadImage(imgSrc, callback) {\n      var imageLoader = new Image();\n      var el = this.el;\n\n      imageLoader.onload = function () {\n        if (el.tagName.toLowerCase() === 'img') {\n          el.setAttribute('src', this.src);\n        } else {\n          el.style.backgroundImage = \"url('\".concat(this.src, \"')\");\n        }\n\n        if (callback && typeof callback == 'function') {\n          callback();\n        }\n      };\n\n      imageLoader.src = imgSrc;\n    }\n  }], [{\n    key: \"isCached\",\n    value: function isCached(el) {\n      return el.getAttribute('data-ib-cache-id') && !el.hasAttribute('data-ib-no-cache');\n    }\n  }, {\n    key: \"shouldIgnore\",\n    value: function shouldIgnore(el) {\n      return el.hasAttribute('data-ib-ignore');\n    }\n  }]);\n\n  return _default;\n}();\n\nexport { _default as default };","function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nvar _default =\n/*#__PURE__*/\nfunction () {\n  function _default() {\n    var enabled = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : false;\n\n    _classCallCheck(this, _default);\n\n    this.enabled = enabled;\n  }\n\n  _createClass(_default, [{\n    key: \"debug\",\n    value: function debug() {\n      if (this.enabled) {\n        var _console;\n\n        (_console = console).log.apply(_console, arguments);\n      }\n    }\n  }, {\n    key: \"debugInfo\",\n    value: function debugInfo() {\n      if (this.enabled) {\n        var _console2;\n\n        (_console2 = console).info.apply(_console2, arguments);\n      }\n    }\n  }, {\n    key: \"debugTable\",\n    value: function debugTable() {\n      if (this.enabled) {\n        var _console3;\n\n        (_console3 = console).table.apply(_console3, arguments);\n      }\n    }\n  }]);\n\n  return _default;\n}();\n\nexport { _default as default };","function _typeof(obj) { if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nvar _default =\n/*#__PURE__*/\nfunction () {\n  function _default() {\n    _classCallCheck(this, _default);\n  }\n\n  _createClass(_default, null, [{\n    key: \"on\",\n    value: function on(event, listener) {\n      if (typeof window.itEvents === 'undefined') {\n        window.itEvents = {};\n      }\n\n      if (_typeof(window.itEvents[event]) !== 'object') {\n        window.itEvents[event] = [];\n      }\n\n      window.itEvents[event].push(listener);\n    }\n  }, {\n    key: \"emit\",\n    value: function emit(event) {\n      var _this = this,\n          _arguments = arguments;\n\n      if (typeof window.itEvents === 'undefined') {\n        window.itEvents = {};\n      } // allow handlers to register themselves before executing\n\n\n      setTimeout(function () {\n        if (_typeof(window.itEvents[event]) === 'object') {\n          var listeners = window.itEvents[event].slice();\n          var length = listeners.length;\n          var args = [].slice.call(_arguments, 1);\n\n          for (var i = 0; i < length; i++) {\n            listeners[i].apply(_this, args);\n          }\n        }\n      }, 0);\n    }\n  }]);\n\n  return _default;\n}();\n\nexport { _default as default };","function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nvar _default =\n/*#__PURE__*/\nfunction () {\n  function _default() {\n    _classCallCheck(this, _default);\n  }\n\n  _createClass(_default, null, [{\n    key: \"getUniqueId\",\n    value: function getUniqueId() {\n      var prefix = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : '';\n\n      if (!this.uidCounter) {\n        this.uidCounter = 0;\n      }\n\n      return \"\".concat(prefix).concat(++this.uidCounter);\n    }\n  }, {\n    key: \"parseBooleanString\",\n    value: function parseBooleanString(boolStr) {\n      if (typeof boolStr === 'string' && boolStr.toLowerCase() === 'true') {\n        return true;\n      }\n\n      return Boolean(parseInt(boolStr));\n    }\n  }, {\n    key: \"passiveEventListenerSupported\",\n    value: function passiveEventListenerSupported() {\n      // check for passive event listener support\n      var passiveSupported = false;\n\n      try {\n        var options = Object.defineProperty({}, 'passive', {\n          get: function get() {\n            passiveSupported = true;\n          }\n        });\n        window.addEventListener('test', null, options);\n      } catch (err) {}\n\n      return passiveSupported;\n    }\n    /**\n     * Setup a throttled event listener\n     *\n     * @param {string} name\n     * @param {function} callback\n     * @param {object} options\n     */\n\n  }, {\n    key: \"throttleEventListener\",\n    value: function throttleEventListener(eventName, callback, options) {\n      var _this = this;\n\n      var passiveSupported = this.passiveEventListenerSupported();\n      options.passive = typeof options.passive === 'undefined' ? true : options.passive;\n      options.capture = typeof options.capture === 'undefined' ? false : options.capture;\n\n      if (!this.eventsRunning) {\n        this.eventsRunning = {};\n      }\n\n      if (!this.eventsRunning.hasOwnProperty(eventName)) {\n        this.eventsRunning[eventName] = false;\n      }\n\n      window.addEventListener(eventName, function () {\n        if (_this.eventsRunning[eventName]) {\n          return;\n        }\n\n        _this.eventsRunning[eventName] = true;\n        requestAnimationFrame(function () {\n          window.dispatchEvent(new CustomEvent(\"\".concat(eventName, \"-throttled\")));\n          _this.eventsRunning[eventName] = false;\n        });\n      }, passiveSupported ? options : options.capture);\n\n      if (typeof callback === 'function') {\n        window.addEventListener(\"\".concat(eventName, \"-throttled\"), callback, passiveSupported ? options : options.capture);\n      }\n    }\n  }]);\n\n  return _default;\n}();\n\nexport { _default as default };"],"mappings":";AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;AClFA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;ACpMA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;ACpQA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;AChDA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;ACvDA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;A","sourceRoot":""}